## Шаблон Sharding (Сегментирование) 
разбивает большую структуру данных
на несколько сегментов, чтобы локализовать влияние блокировок чтения/
записи.
Применимость
Термин сегментирование (sharding) обычно используется в  контексте поддержки состояния распределенных приложений и подразумевает разделение
данных между экземплярами сервера. Такое горизонтальное сегментирование обычно используется в базах данных и других хранилищах для распределения нагрузки и обеспечения избыточности.
В службах, выполняющихся конкурентно и использующих общую структуру данных с механизмом блокировки для защиты от конфликтов при записи,
может возникнуть несколько иная проблема. В этом сценарии блокировки,
обеспечивающие целостность данных, могут превратиться в  узкое место,
когда процессы начинают тратить больше времени на ожидание освобождения блокировок, чем на выполнение своей работы. Это досадное явление
называется конфликтом блокировок.

В некоторых случаях проблему можно решить путем масштабирования
числа экземпляров, но такое решение также увеличивает сложность и длительность задержек, потому что требует использовать распределенные блокировки, обеспечивающие согласованность операций записи. Альтернативной стратегией уменьшения конфликтов блокировок при работе с общими
структурами данных является вертикальное сегментирование, когда большая
структура данных делится на две или более структур, каждая из которых является частью целого. При использовании этой стратегии блокировать требуется только часть общей структуры, что снижает вероятность конфликтов
на блокировках

Компоненты
Этот шаблон включает следующие компоненты:
ShardedMap
    Абстракция вокруг одного или нескольких сегментов Shard, обеспечивающая доступ для чтения и  записи, как если бы сегменты были единой
    структурой.
Shard
    Отдельная коллекция со своей блокировкой, представляющая один сегмент данных